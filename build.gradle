plugins {
    id 'java'
    id 'application'
}

group 'com.guardsquare'
version '1.0'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenLocal()
    mavenCentral()
}

application {
    mainClassName = 'proguard.tools.KotlinMetadataPrinter'
}

jar {
    manifest {
        attributes 'Main-Class': application.mainClassName
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    archiveName "kotlin-metadata-printer.jar"
}

dependencies {
    // ProGuard Core.
    implementation group: 'net.sf.proguard', name:'proguard-core', version: '7.0.0'

    // dex2jar dependencies.
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation group: 'org.ow2.asm', name: 'asm-debug-all', version: '5.0.3'

    // For some string utils.
    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.0'

    // For building the JSON output.
    implementation group: 'org.json', name: 'json', version: '20190722'

    // picocli for command line parsing.
    implementation group: 'info.picocli', name: 'picocli', version: '3.6.1'
}
